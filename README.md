# SEDATree
SEDA阶段性时间驱动技术研究

![](https://i.imgur.com/mJa6DL3.png)

<pre>
多线程并发模型

      该模型针对每一个请求，会为其创建并分配一个线程。该线程负责这个请求的处理。
        该模型的优点：
           执行粒度是整个完整的处理流程，处理逻辑清晰，容易开发。
        但与此同时将缺点也很明显：
           如果处理过程中某一步骤出现长时间调用（如网络通信，I/O磁盘读写等），则会阻塞后续
           的请求，造成资源的额浪费。并且随着处理请求的不断增加，导致并发执行的线程数量太多
           。过多的线程数量导致系统在线程调度和资源争用上的开销过大。引起系统性能机具下降，导致系统处理能力下降。
</pre>

![](https://i.imgur.com/iUkZ0GG.png)

<pre>
事件驱动模型

      该模型的思想为：
             将处理流程分割成多个步骤，每一个步骤都实现为一个有限状态机，所有的请求会作为
         事件进入系统，由调度器负责传递相应的状态机，状态机的处理也以事件的形式传递给调度器
         ，新的事件将再次被调度器转发给下一个状态机进行系统检测和调整。
       
         但是其缺点也很明显：
             即由于Scheduler调度器的设计和实现过于复杂，针对于不同的应用和系统的逻辑变更
         需要不同的实现，导致采用这一模型构建出的系统将十分庞大和难以控制。

         综上所述，主流的多线程编程模型和事件驱动编程模型虽然都各有其优势，但同时也都有其
         不可避免的缺陷，并不适合在高并发的环境下进行成熟系统的开发。
</pre>

![](https://i.imgur.com/Ung1W4c.png)

![](https://i.imgur.com/Y5FMtZL.png)

<pre>
SEDA架构
 
      SEDA架构整合了多线程服务器模型和事件驱动服务器模型的优势，它可以高效的管理和控制服务
      器资源，良好的适应高并发环境，SEDA被设计成一个可伸缩的高可用服务器架构，应用服务器之
      请求处理步骤通常是复杂的，基于事件驱动处理的有穷状态机

      每一个Stage由下述四部分组成：
          (1) 事件队列：用以维持Stage间之通信。
          (2) 事件处理器：用以执行请求到这一个Stage中所应执行的工作。
          (3) 线程池：用以提供事件处理器且可以并发执行事件处理之环境。
          (4) 性能控制器：用以对该Stage资源（线程数、队列长度等等）进行调整。

       在SEDA架构中，基本的处理单元称为阶段（Stage），一个阶段由事件队列、动态线程池、事件
       处理器和一个性能控制器四个组件构成。SEDA将一个请求的处理过程分解为一系列的阶段，阶段
       之间通过事件队列联系，开发人员只负责每个阶段的服务逻辑以及阶段间的连接逻辑，而由各个
       阶段自身负责资源管理以及负载适应功能。使用这种解耦拆分可以使系统达到高并发性、对负载变
       化的良好适应性以及高度的可缩放性。
</pre>
